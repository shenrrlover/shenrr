<!--
 * @Author: wqs wb-sqw272215@alibaba-inc.com
 * @Date: 2023-11-29 16:20:45
 * @LastEditors: wqs wb-sqw272215@alibaba-inc.com
 * @LastEditTime: 2023-11-29 17:06:17
 * @FilePath: /appstack-assets/Users/sqw/Desktop/yh
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->
<!DOCTYPE html>
<html>
<head>
    <style>
        p {
    position: fixed;
    bottom: 40px;
    width: 100%;
    font-size: 32px;
    color: rgba(211, 211, 211, 0.5);
    text-align: center;
    word-wrap: break-word;
}
    </style>
</head>
<body>
    <div class="heart"></div>
</body>
<script>
    // 创建canvas元素并获取其上下文
const canvas = document.createElement('canvas');
document.body.appendChild(canvas);
const ctx = canvas.getContext('2d');

// 设置canvas的大小为窗口的大小
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// 当窗口大小改变时，更新canvas的大小
window.addEventListener('resize', function() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

// 创建Heart类
class Heart {
  constructor() {
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height;
    this.speedX = (Math.random() - 0.5) * 3; // 降低速度
    this.speedY = (Math.random() - 0.5) * 3; // 降低速度
    this.size = Math.random() * 5 + 5;
    this.life = 1;
  }

  update() {
      this.x += this.speedX;
      this.y += this.speedY;
      this.size *= 0.96;
      this.life -= 0.01;
      // 添加闪烁效果
        this.opacity = 0.5 + Math.sin(this.life * Math.PI) * 0.5;
  }

  draw() {
    ctx.beginPath();
    ctx.moveTo(this.x, this.y);
    ctx.bezierCurveTo(this.x, this.y - 3*this.size/4, this.x - this.size, this.y - 3*this.size/4, this.x - this.size, this.y);
    ctx.bezierCurveTo(this.x - this.size, this.y + this.size/2, this.x, this.y + this.size/2, this.x, this.y + this.size);
    ctx.bezierCurveTo(this.x, this.y + this.size/2, this.x + this.size, this.y + this.size/2, this.x + this.size, this.y);
    ctx.bezierCurveTo(this.x + this.size, this.y - 3*this.size/4, this.x, this.y - 3*this.size/4, this.x, this.y);
    ctx.fillStyle = `rgba(255, 105, 180, ${this.opacity})`; // 使用透明度
    ctx.fill();
}
}

// 创建一个数组来存储所有的Heart对象
const hearts = [];

// 创建一个函数来生成新的Heart对象并将它们添加到数组中
function generateHearts() {
  for (let i = 0; i < 10; i++) {
      hearts.push(new Heart());
  }
}

// 创建一个动画循环，它会在每个帧更新所有的Heart对象并在canvas上绘制它们
function animate() {
  requestAnimationFrame(animate);
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  generateHearts();

  for (let i = hearts.length - 1; i >= 0; i--) {
      hearts[i].update();
      hearts[i].draw();

      if (hearts[i].life <= 0) {
          hearts.splice(i, 1);
      }
  }
}
// 创建一个p元素并设置其内容
const p = document.createElement('p');
p.textContent = 'Dr瑞：你看，这么多人，这么大的世界，我遇到了你，你也遇到了我，真好。';
document.body.appendChild(p);
animate();
  </script>
</html>
